{"ast":null,"code":"import _regeneratorRuntime from \"/Users/might/Documents/projects/mine/nextjs/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/might/Documents/projects/mine/nextjs/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { createAsyncThunk, createSelector, createSlice } from '@reduxjs/toolkit';\n// import { apiUsersGetMe } from '@services/api/users.api';\nimport { apiAuthLogout } from '@services/api/auth.api';\nimport { apolloClient } from '@helpers/apollo.helper';\nimport { GET_MEMBER_QUERY } from '@constants/graphql.constants';\nexport var bindUser = createAsyncThunk('user/bindUser', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  var _yield$apolloClient$q, data;\n\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return apolloClient.query({\n            query: GET_MEMBER_QUERY\n          });\n\n        case 2:\n          _yield$apolloClient$q = _context.sent;\n          data = _yield$apolloClient$q.data;\n          return _context.abrupt(\"return\", data.member);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n})));\nexport var logoutUser = createAsyncThunk('user/logoutUser', /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          return _context2.abrupt(\"return\", apiAuthLogout());\n\n        case 1:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _callee2);\n})));\nvar initialState = null;\nexport var userSlice = createSlice({\n  name: 'user',\n  initialState: initialState,\n  reducers: {},\n  extraReducers: function extraReducers(builder) {\n    builder.addCase(bindUser.fulfilled, function (state, action) {\n      state = action.payload;\n      return state;\n    });\n    builder.addCase(bindUser.rejected, function (state) {\n      state = null;\n      return state;\n    });\n    builder.addCase(logoutUser.fulfilled, function (state) {\n      state = null;\n      return state;\n    });\n  }\n});\nexport var selectorUser = createSelector(function (state) {\n  return state.user;\n}, function (user) {\n  return user;\n});","map":{"version":3,"sources":["/Users/might/Documents/projects/mine/nextjs/src/redux/user.redux.ts"],"names":["createAsyncThunk","createSelector","createSlice","apiAuthLogout","apolloClient","GET_MEMBER_QUERY","bindUser","query","data","member","logoutUser","initialState","userSlice","name","reducers","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","selectorUser","user"],"mappings":";;AAAA,SACEA,gBADF,EACoBC,cADpB,EACoCC,WADpC,QAEO,kBAFP;AAIA;AACA,SAASC,aAAT,QAA8B,wBAA9B;AACA,SAASC,YAAT,QAA6B,wBAA7B;AACA,SAASC,gBAAT,QAAiC,8BAAjC;AAIA,OAAO,IAAMC,QAAQ,GAAGN,gBAAgB,CAAC,eAAD,wEAAkB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACjCI,YAAY,CAACG,KAAb,CAAmB;AACxCA,YAAAA,KAAK,EAAEF;AADiC,WAAnB,CADiC;;AAAA;AAAA;AAChDG,UAAAA,IADgD,yBAChDA,IADgD;AAAA,2CAMjDA,IAAI,CAACC,MAN4C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAlB,GAAjC;AAQP,OAAO,IAAMC,UAAU,GAAGV,gBAAgB,CAAC,iBAAD,wEAAoB;AAAA;AAAA;AAAA;AAAA;AAAA,4CAAYG,aAAa,EAAzB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAApB,GAAnC;AAEP,IAAMQ,YAAuB,GAAG,IAAhC;AAEA,OAAO,IAAMC,SAAS,GAAGV,WAAW,CAAoD;AACtFW,EAAAA,IAAI,EAAE,MADgF;AAEtFF,EAAAA,YAAY,EAAZA,YAFsF;AAGtFG,EAAAA,QAAQ,EAAE,EAH4E;AAItFC,EAAAA,aAAa,EAAE,uBAACC,OAAD,EAAa;AAC1BA,IAAAA,OAAO,CAACC,OAAR,CAAgBX,QAAQ,CAACY,SAAzB,EAAoC,UAACC,KAAD,EAAQC,MAAR,EAA2C;AAC7ED,MAAAA,KAAK,GAAGC,MAAM,CAACC,OAAf;AACA,aAAOF,KAAP;AACD,KAHD;AAIAH,IAAAA,OAAO,CAACC,OAAR,CAAgBX,QAAQ,CAACgB,QAAzB,EAAmC,UAACH,KAAD,EAAW;AAC5CA,MAAAA,KAAK,GAAG,IAAR;AACA,aAAOA,KAAP;AACD,KAHD;AAIAH,IAAAA,OAAO,CAACC,OAAR,CAAgBP,UAAU,CAACQ,SAA3B,EAAsC,UAACC,KAAD,EAAW;AAC/CA,MAAAA,KAAK,GAAG,IAAR;AACA,aAAOA,KAAP;AACD,KAHD;AAID;AAjBqF,CAApD,CAA7B;AAoBP,OAAO,IAAMI,YAAY,GAAGtB,cAAc,CAAC,UAACkB,KAAD;AAAA,SAAgCA,KAAK,CAACK,IAAtC;AAAA,CAAD,EAA6C,UAACA,IAAD;AAAA,SAAUA,IAAV;AAAA,CAA7C,CAAnC","sourcesContent":["import {\n  createAsyncThunk, createSelector, createSlice, PayloadAction, SliceCaseReducers,\n} from '@reduxjs/toolkit';\nimport { UserDTO } from '@dtos/user.dto';\n// import { apiUsersGetMe } from '@services/api/users.api';\nimport { apiAuthLogout } from '@services/api/auth.api';\nimport { apolloClient } from '@helpers/apollo.helper';\nimport { GET_MEMBER_QUERY } from '@constants/graphql.constants';\n\nexport type UserState = UserDTO | null;\n\nexport const bindUser = createAsyncThunk('user/bindUser', async () => {\n  const { data } = await apolloClient.query({\n    query: GET_MEMBER_QUERY,\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-return\n  return data.member;\n});\nexport const logoutUser = createAsyncThunk('user/logoutUser', async () => apiAuthLogout());\n\nconst initialState: UserState = null;\n\nexport const userSlice = createSlice<UserDTO | null, SliceCaseReducers<UserDTO | null>>({\n  name: 'user',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(bindUser.fulfilled, (state, action: PayloadAction<UserDTO>) => {\n      state = action.payload;\n      return state;\n    });\n    builder.addCase(bindUser.rejected, (state) => {\n      state = null;\n      return state;\n    });\n    builder.addCase(logoutUser.fulfilled, (state) => {\n      state = null;\n      return state;\n    });\n  },\n});\n\nexport const selectorUser = createSelector((state: { user: UserState }) => state.user, (user) => user);\n"]},"metadata":{},"sourceType":"module"}